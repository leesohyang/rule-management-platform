{"ast":null,"code":"import axios from 'axios';\nimport { getAllR, getGraphs, getLinks, getTmp, getVens, getAllH, selectHead, revRe, saveVersion, getAllHL, getAllHN } from \"./Redux/actions\";\nimport { useDispatch } from \"react-redux\";\nconst BASE_URL = 'http://10.250.238.177:8096/api/v1';\n\nfunction getAllRedux(type) {\n  return async dispatch => {\n    await axios.get('http://10.250.238.177:8096/api/v1/' + type + '/selectall').then(response => {\n      switch (type) {\n        case \"normalizerule\":\n          return dispatch(getAllR(response.data.map(({\n            vendors,\n            ...other\n          }) => {\n            return {\n              vendors: vendors.join(',').toString(),\n              ...other\n            };\n          })));\n\n        default:\n          return dispatch(getAllR(response.data));\n      }\n    }).catch(error => {\n      throw error;\n    });\n  };\n}\n\nfunction getNormalizeRuleFilter(obj) {\n  return async dispatch => {\n    await axios.post('http://10.250.238.177:8096/api/v1/normalizerule/selectAllFilters', obj).then(response => {\n      console.log(response.data);\n      return dispatch(getAllR(response.data.slice().map(({\n        vendors,\n        ...other\n      }) => {\n        return {\n          vendors: vendors.join(',').toString(),\n          ...other\n        };\n      })));\n    }).catch(error => {\n      throw error;\n    });\n  };\n}\n\nfunction getNormalizeRule(offset, limit) {\n  return async dispatch => {\n    await axios.get('http://10.250.238.177:8096/api/v1/normalizerule/selectall?offset=' + offset + '&limit=' + limit).then(response => {\n      console.log(response.data);\n      return dispatch(getAllR(response.data.slice().map(({\n        vendors,\n        ...other\n      }) => {\n        return {\n          vendors: vendors.join(',').toString(),\n          ...other\n        };\n      })));\n    }).catch(error => {\n      throw error;\n    });\n  };\n}\n\nasync function getRowCounts(type) {\n  return await axios.get('http://10.250.238.177:8096/api/v1/' + type + '/getrowcount').then(res => res.data);\n}\n\nasync function getFiltersCounts(type, obj) {\n  return await axios.post('http://10.250.238.177:8096/api/v1/' + type + '/getFiltersCount', obj).then(res => res.data);\n} //for history\n\n\nfunction getAll(type) {\n  return async dispatch => {\n    await axios.get('http://10.250.238.177:8096/api/v1/' + type + '/selectall').then(response => {\n      switch (type) {\n        case \"history\":\n          return response.data.length && dispatch(getAllH(response.data));\n\n        case \"history/livedetectrule\":\n          return response.data.length && dispatch(getAllHL(response.data));\n\n        case \"history/normalizerule\":\n          return response.data.length && dispatch(getAllHN(response.data));\n\n        default:\n          return;\n      }\n    }).catch(error => {\n      throw error;\n    });\n  };\n}\n\nasync function deActiveHead() {\n  return await axios.get('http://10.250.238.177:8096/api/v1/header/deActive').catch(error => {\n    throw error;\n  });\n}\n\nasync function insertHead(ob) {\n  return await axios.post('http://10.250.238.177:8096/api/v1/header/insert', ob);\n}\n\nasync function activeHead(version) {\n  return await axios.post('http://10.250.238.177:8096/api/v1/header/active', version);\n} // function insertHead (ob) {\n//     return async (dispatch) => {\n//         await axios\n//             .post('http://10.250.238.177:8096/api/v1/header/insert', ob)\n//             .then(response => {\n//                 dispatch(getHead)\n//             })\n//     }\n// }\n\n\nfunction getHeadVer(version) {\n  console.log(version);\n  return async dispatch => {\n    await axios.get('http://10.250.238.177:8096/api/v1/header/selectHeaderVersion?ver=' + version).then(response => {\n      console.log(response.data.ver); //안가네\n\n      const res = response.data.header.map(it => Object.assign({}, {\n        Header: it,\n        accessor: it\n      }));\n      dispatch(selectHead(res));\n    }).catch(error => {\n      throw error;\n    });\n  };\n} //live 되어있는 헤드 가져오기\n\n\nasync function getHead() {\n  return await axios.get('http://10.250.238.177:8096/api/v1/header/selectheader').then(response => {\n    const res = response.data.header.map(it => Object.assign({}, {\n      Header: it,\n      accessor: it\n    })); // dispatch(saveVersion(response.data.ver)) //버전 세팅\n    // dispatch(selectHead(res))\n\n    console.log(response.data.ver);\n    return response.data.ver;\n  }).catch(error => {\n    throw error;\n  });\n}\n\nasync function getLiveRulesFilter(obj) {\n  return await axios.post('http://10.250.238.177:8096/api/v1/rules/selectAllFilters', obj).then(response => {\n    const res = response.data.map(({\n      conditions,\n      ...other\n    }) => {\n      const tp = {};\n      conditions.forEach(({\n        field,\n        value\n      }) => {\n        tp[field] = value;\n      });\n      return Object.assign({}, other, tp);\n    });\n    return res;\n  }).catch(error => {\n    throw error;\n  });\n} //conditional field 땜에 떨어져있음.\n\n\nasync function getLiveRules(offset, limit) {\n  return await axios.get('http://10.250.238.177:8096/api/v1/rules/selectall?offset=' + offset + '&limit=' + limit).then(response => {\n    const res = response.data.map(({\n      conditions,\n      ...other\n    }) => {\n      const tp = {};\n      conditions.forEach(({\n        field,\n        value\n      }) => {\n        tp[field] = value;\n      });\n      return Object.assign({}, other, tp);\n    });\n    return res;\n  }).catch(error => {\n    console.error(error);\n  });\n}\n\nasync;\n\nasync function getReleaseForm(type) {\n  return await axios.get('http://10.250.238.177:8096/api/v1/' + 'releaseForm' + '/select?type=' + type).catch(error => {\n    console.error(error);\n  });\n}\n\nasync function signalZk(signals) {\n  console.log(signals);\n  return await axios.post('http://10.250.238.177:8096/api/v1/' + 'field' + '/signal', signals).catch(error => {\n    console.error(error);\n  });\n}\n\nasync function parse(parseStr) {\n  console.log({\n    parseStr\n  });\n  return await axios.post('http://10.250.238.177:8096/api/v1/normalizerule/parse', {\n    parseStr\n  }).then(response => {\n    console.log(response);\n    return JSON.parse(decodeURIComponent(response.data.replace(/\\+/g, \"%20\")));\n  }).catch(error => {\n    console.error(error);\n  });\n}\n\nasync function releaseZk(options) {\n  console.log(options);\n  return await axios.post('http://10.250.238.177:8096/api/v1/' + 'field' + '/zookeeper', options).then(response => {\n    console.log(response.data);\n  }).catch(error => {\n    console.error(error);\n  });\n}\n\nfunction getNodes() {\n  //select all => table 조회 용\n  return async dispatch => {\n    await axios.all([axios.get(\"http://10.250.238.177:8096/api/v1/node/selectall\"), axios.get(\"http://10.250.238.177:8096/api/v1/link/selectall\")]).then(axios.spread(function (node, link) {\n      const m = {};\n      node.data.forEach(i => {\n        m[i.id] = i.name;\n      });\n      console.log(link.data);\n      dispatch(getLinks(link.data.map(i => ({\n        idx: i.id,\n        ...i\n      }))));\n    })).catch(error => {\n      console.error(error);\n    });\n  };\n}\n\nfunction getAds(nodeId) {\n  // select 인접 노드\n  return async dispatch => {\n    await axios.get(\"http://10.250.238.177:8096/api/v1/node/selectadjacent/\" + nodeId).then(response => {\n      dispatch(getGraphs(response.data.nodes, response.data.links));\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n}\n\nasync function getAds2(nodeId) {\n  return await axios.get(\"http://10.250.238.177:8096/api/v1/node/selectadjacent/\" + nodeId).then(response => {\n    return response.data;\n  }).catch(error => {\n    console.error(error);\n  });\n}\n\nasync function getRow(type, id) {\n  return await axios.get('http://10.250.238.177:8096/api/v1/' + type + '/select?id=' + id).then(response => {\n    console.log([...response.data].shift());\n    return [...response.data].shift();\n  }).catch(error => {\n    console.error(error);\n  });\n}\n\nfunction getTemp(type) {\n  return dispatch => {\n    axios.get('http://10.250.238.177:8096/api/v1/template/selectbytype?node=' + type).then(response => {\n      dispatch(getTmp(response.data));\n    }).catch(error => {\n      throw error;\n    });\n  };\n}\n\nasync function getTypes(type) {\n  return await axios.get(\"http://10.250.238.177:8096/api/v1/template/entitytypes?node=\" + type).catch(error => {\n    console.error(error);\n  });\n}\n\nasync function getVendors(enType) {\n  return await axios.get(\"http://10.250.238.177:8096/api/v1/template/vendors?entity=\" + enType).catch(error => {\n    console.error(error);\n  });\n}\n\nasync function getModels(enType, venType) {\n  return await axios.get(\"http://10.250.238.177:8096/api/v1/template/models?entity=\" + enType + \"&vendor=\" + venType).catch(error => {\n    console.error(error);\n  });\n} // 추가 가능한 entity list 조회\n\n\nasync function getEna(enType) {\n  return await axios.get(\"http://10.250.238.177:8096/api/v1/asset/selectbyquery?entityType=\" + enType).catch(error => {\n    console.error(error);\n  });\n}\n\nasync function getEnd(enType, venType, moType) {\n  return await axios.get(\"http://10.250.238.177:8096/api/v1/device/selectbyquery?entityType=\" + enType + \"&vendor=\" + venType + \"&model=\" + moType).catch(error => {\n    console.error(error);\n  });\n}\n\nasync function insertLink(ob) {\n  return await axios.post('http://10.250.238.177:8096/api/v1/link/insert', ob).then(response => {\n    console.log(response);\n  }).catch(error => {\n    console.error(error);\n  });\n}\n\nasync function insertLiveDetect(ob, version) {\n  const con = [];\n\n  const res = (({\n    id,\n    active,\n    ruleType,\n    keyField,\n    confirms,\n    ver,\n    ...other\n  }) => {\n    Object.keys(other).filter(it => other[it] !== \"\").forEach(it => {\n      con.push({\n        field: it,\n        value: other[it]\n      });\n    });\n    return {\n      active,\n      ruleType,\n      keyField,\n      confirms,\n      ver: version\n    };\n  })(ob);\n\n  res['conditions'] = con;\n  return await axios.post('http://10.250.238.177:8096/api/v1/rules/insert', res).then(() => console.log(\"hi\")).catch(error => {\n    console.error(error);\n  });\n}\n\nasync function insert(type, ob) {\n  // const sob = (({id, createdAt, updatedAt, ... other}) => other)(ob)\n  const sob = (({\n    id,\n    updatedAt,\n    ...other\n  }) => other)(ob); //여기서 id를 빼는데.\n  // console.log(typeof sob.value)\n\n\n  console.log(sob);\n  return await axios.post('http://10.250.238.177:8096/api/v1/' + type + '/insert', sob).catch(error => {\n    console.error(error);\n  });\n}\n\n;\n\nasync function insertNormal(ob) {\n  // ob[\"rules\"] = []\n  const sob = (({\n    vendors,\n    ...other\n  }) => {\n    return Object.assign({}, {\n      vendors: vendors.split(',')\n    }, other); //TODO::restore 할때 vendor 콤마가 사라짐\n  })(ob);\n\n  console.log(sob);\n  return await axios.post('http://10.250.238.177:8096/api/v1/normalizerule/upsertall', sob).catch(error => {\n    console.error(error);\n  });\n}\n\nasync function insertNormalTotal(ob) {\n  const sob = (({\n    vendors,\n    ...other\n  }) => {\n    return Object.assign({}, {\n      vendors: vendors.split(',')\n    }, other);\n  })(ob);\n\n  console.log(sob);\n  return await axios.post('http://10.250.238.177:8096/api/v1/normalizerule/upsert', sob).catch(error => {\n    console.error(error);\n  });\n}\n\nasync function setHistory() {\n  return await axios.get(\"http://10.250.238.177:8096/api/v1/normalizerule/selectall/tohistory\").then(response => console.log(response.data)).catch(error => {\n    console.error(error);\n  });\n}\n\nasync function getNextVal() {\n  return await axios.get(\"http://10.250.238.177:8096/api/v1/normalizerule/nextid\").catch(error => {\n    console.error(error);\n  });\n}\n\nasync function update(type, ob) {\n  console.log(ob);\n\n  const sob = (({\n    createdAt,\n    updatedAt,\n    ...other\n  }) => other)(ob);\n\n  return await axios.post('http://10.250.238.177:8096/api/v1/' + type + '/update', sob).catch(error => {\n    console.error(error);\n  });\n}\n\nasync function del(type, ids) {\n  console.log(ids);\n  return await axios.delete('http://10.250.238.177:8096/api/v1/' + type + '/delete', {\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    data: ids\n  }).catch(error => {\n    console.error(error);\n  });\n}\n\nasync function delNormal(type, id) {\n  return await axios.delete('http://10.250.238.177:8096/api/v1/' + type + '/delete', {\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    data: id\n  }).catch(error => {\n    console.error(error);\n  });\n}\n\nasync function delAll(type) {\n  return await axios.get('http://10.250.238.177:8096/api/v1/' + type + '/deleteAll').catch(error => {\n    console.error(error);\n  });\n}\n\nexport const apiProvider = {\n  insert,\n  update,\n  del,\n  delNormal,\n  delAll,\n  getAllRedux,\n  getNormalizeRule,\n  getNormalizeRuleFilter,\n  getHead,\n  getReleaseForm,\n  releaseZk,\n  parse,\n  signalZk,\n  getAll,\n  getRow,\n  getTemp,\n  getTypes,\n  getVendors,\n  getModels,\n  getNodes,\n  getEna,\n  getEnd,\n  getNextVal,\n  setHistory,\n  insertLink,\n  getAds,\n  getAds2,\n  getLiveRules,\n  getLiveRulesFilter,\n  insertLiveDetect,\n  insertNormal,\n  insertNormalTotal,\n  insertHead,\n  activeHead,\n  getHeadVer,\n  getRowCounts,\n  getFiltersCounts,\n  deActiveHead\n};","map":{"version":3,"sources":["/home/leesohyang/WebstormProjects/fronted_react_final/src/services/Provider.js"],"names":["axios","getAllR","getGraphs","getLinks","getTmp","getVens","getAllH","selectHead","revRe","saveVersion","getAllHL","getAllHN","useDispatch","BASE_URL","getAllRedux","type","dispatch","get","then","response","data","map","vendors","other","join","toString","catch","error","getNormalizeRuleFilter","obj","post","console","log","slice","getNormalizeRule","offset","limit","getRowCounts","res","getFiltersCounts","getAll","length","deActiveHead","insertHead","ob","activeHead","version","getHeadVer","ver","header","it","Object","assign","Header","accessor","getHead","getLiveRulesFilter","conditions","tp","forEach","field","value","getLiveRules","async","getReleaseForm","signalZk","signals","parse","parseStr","JSON","decodeURIComponent","replace","releaseZk","options","getNodes","all","spread","node","link","m","i","id","name","idx","getAds","nodeId","nodes","links","getAds2","getRow","shift","getTemp","getTypes","getVendors","enType","getModels","venType","getEna","getEnd","moType","insertLink","insertLiveDetect","con","active","ruleType","keyField","confirms","keys","filter","push","insert","sob","updatedAt","insertNormal","split","insertNormalTotal","setHistory","getNextVal","update","createdAt","del","ids","delete","headers","delNormal","delAll","apiProvider"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport {\n    getAllR,\n    getGraphs,\n    getLinks,\n    getTmp,\n    getVens,\n    getAllH,\n    selectHead,\n    revRe,\n    saveVersion,\n    getAllHL, getAllHN\n} from \"./Redux/actions\";\nimport {useDispatch} from \"react-redux\";\n\n\nconst BASE_URL = 'http://10.250.238.177:8096/api/v1'\n\nfunction getAllRedux(type) {\n    return async (dispatch) => {\n        await axios\n            .get('http://10.250.238.177:8096/api/v1/' + type + '/selectall')\n            .then(response => {\n                switch (type) {\n                    case \"normalizerule\":\n                        return dispatch(getAllR(response.data.map(\n                            ({vendors, ...other}) => {\n                                return {vendors: vendors.join(',').toString(), ...other}\n                            }\n                        )))\n                    default:\n                        return dispatch(getAllR(response.data))\n                }\n            })\n            .catch(error => {\n                throw(error);\n            })\n    }\n}\n\nfunction getNormalizeRuleFilter(obj) {\n    return async (dispatch) => {\n        await axios\n            .post('http://10.250.238.177:8096/api/v1/normalizerule/selectAllFilters', obj)\n            .then(response => {\n                console.log(response.data)\n                return dispatch(getAllR(response.data.slice().map(\n                    ({vendors, ...other}) => {\n                        return {vendors: vendors.join(',').toString(), ...other}\n                    }\n                )))\n            })\n            .catch(error => {\n                throw(error);\n            })\n    }\n}\n\nfunction getNormalizeRule(offset, limit) {\n    return async (dispatch) => {\n        await axios\n            .get('http://10.250.238.177:8096/api/v1/normalizerule/selectall?offset=' + offset + '&limit=' + limit)\n            .then(response => {\n                console.log(response.data)\n                return dispatch(getAllR(response.data.slice().map(\n                    ({vendors, ...other}) => {\n                        return {vendors: vendors.join(',').toString(), ...other}\n                    }\n                )))\n            })\n            .catch(error => {\n                throw(error);\n            })\n    }\n}\n\nasync function getRowCounts(type) {\n    return await axios\n        .get('http://10.250.238.177:8096/api/v1/' + type + '/getrowcount')\n        .then((res) => res.data)\n}\n\nasync function getFiltersCounts(type, obj) {\n    return await axios\n        .post('http://10.250.238.177:8096/api/v1/' + type + '/getFiltersCount', obj)\n        .then((res) => res.data)\n}\n\n\n//for history\nfunction getAll(type) {\n    return async (dispatch) => {\n        await axios\n            .get('http://10.250.238.177:8096/api/v1/' + type + '/selectall')\n            .then(response => {\n\n                switch (type) {\n                    case \"history\":\n                        return response.data.length && dispatch(getAllH(response.data))\n                    case \"history/livedetectrule\":\n                        return response.data.length && dispatch(getAllHL(response.data))\n                    case \"history/normalizerule\":\n                        return response.data.length && dispatch(getAllHN(response.data))\n                    default:\n                        return\n                }\n            })\n            .catch(error => {\n                throw(error);\n            })\n    }\n}\n\n\nasync function deActiveHead() {\n    return await axios\n        .get('http://10.250.238.177:8096/api/v1/header/deActive')\n        .catch(error => {\n            throw(error);\n        })\n}\n\nasync function insertHead(ob) {\n\n    return await axios\n        .post('http://10.250.238.177:8096/api/v1/header/insert', ob)\n}\n\nasync function activeHead(version) {\n    return await axios\n        .post('http://10.250.238.177:8096/api/v1/header/active', version)\n}\n\n// function insertHead (ob) {\n//     return async (dispatch) => {\n//         await axios\n//             .post('http://10.250.238.177:8096/api/v1/header/insert', ob)\n//             .then(response => {\n//                 dispatch(getHead)\n//             })\n//     }\n// }\nfunction getHeadVer(version) {\n    console.log(version)\n    return async (dispatch) => {\n        await axios\n            .get('http://10.250.238.177:8096/api/v1/header/selectHeaderVersion?ver=' + version)\n            .then(response => {\n                console.log(response.data.ver); //안가네\n                const res = response.data.header.map((it) =>\n                    Object.assign({}, {Header: it, accessor: it})\n                );\n                dispatch(selectHead(res));\n            })\n            .catch(error => {\n                throw(error);\n            })\n    }\n}\n\n//live 되어있는 헤드 가져오기\nasync function getHead() {\n    return await axios\n        .get('http://10.250.238.177:8096/api/v1/header/selectheader')\n        .then(response => {\n            const res = response.data.header.map((it) =>\n                Object.assign({}, {Header: it, accessor: it})\n            )\n            // dispatch(saveVersion(response.data.ver)) //버전 세팅\n            // dispatch(selectHead(res))\n            console.log(response.data.ver)\n            return response.data.ver\n        })\n        .catch(error => {\n            throw(error);\n        })\n\n}\n\nasync function getLiveRulesFilter(obj) {\n        return await axios\n            .post('http://10.250.238.177:8096/api/v1/rules/selectAllFilters', obj)\n            .then(response => {\n                const res = response.data.map(({conditions, ...other}) => {\n                    const tp = {};\n                    conditions.forEach(\n                        ({field, value}) => {\n                            tp[field] = value\n                        }\n                    )\n                    return Object.assign({}, other, tp)\n                })\n                return res\n            })\n            .catch(error => {\n                throw(error);\n            })\n}\n\n//conditional field 땜에 떨어져있음.\nasync function getLiveRules(offset, limit) {\n\n    return await axios\n        .get('http://10.250.238.177:8096/api/v1/rules/selectall?offset=' + offset + '&limit=' + limit)\n        .then(response => {\n            const res = response.data.map(({conditions, ...other}) => {\n                const tp = {};\n                conditions.forEach(\n                    ({field, value}) => {\n                        tp[field] = value\n                    }\n                )\n                return Object.assign({}, other, tp)\n            })\n            return res\n        })\n        .catch((error) => {\n            console.error(error)\n        })\n}\nasync \n\n\nasync function getReleaseForm(type) {\n    return await axios\n        .get('http://10.250.238.177:8096/api/v1/' + 'releaseForm' + '/select?type=' + type)\n        .catch((error) => {\n            console.error(error)\n        })\n}\n\nasync function signalZk(signals) {\n    console.log(signals)\n    return await axios\n        .post('http://10.250.238.177:8096/api/v1/' + 'field' + '/signal', signals)\n        .catch((error) => {\n            console.error(error)\n        })\n}\n\nasync function parse(parseStr) {\n    console.log({parseStr})\n    return await axios\n        .post('http://10.250.238.177:8096/api/v1/normalizerule/parse', {parseStr})\n        .then(response => {\n            console.log(response)\n            return JSON.parse(decodeURIComponent(response.data.replace(/\\+/g, \"%20\")))\n        })\n        .catch((error) => {\n            console.error(error)\n        })\n\n}\n\nasync function releaseZk(options) {\n    console.log(options)\n    return await axios\n        .post('http://10.250.238.177:8096/api/v1/' + 'field' + '/zookeeper', options)\n        .then(response => {\n            console.log(response.data)\n        })\n        .catch((error) => {\n            console.error(error)\n        })\n}\n\n\nfunction getNodes() { //select all => table 조회 용\n    return async (dispatch) => {\n        await axios.all([\n            axios.get(\"http://10.250.238.177:8096/api/v1/node/selectall\"),\n            axios.get(\"http://10.250.238.177:8096/api/v1/link/selectall\")\n        ])\n            .then(axios.spread(function (node, link) {\n                const m = {}\n                node.data.forEach((i) => {\n                    m[i.id] = i.name\n                })\n                console.log(link.data)\n                dispatch(getLinks(\n                    link.data.map((i) => ({idx: i.id, ...i}))\n                ))\n            }))\n            .catch((error) => {\n                console.error(error)\n            })\n    }\n}\n\nfunction getAds(nodeId) { // select 인접 노드\n    return async (dispatch) => {\n        await axios.get(\"http://10.250.238.177:8096/api/v1/node/selectadjacent/\" + nodeId)\n            .then(response => {\n                dispatch(getGraphs(\n                    response.data.nodes,\n                    response.data.links\n                ))\n            })\n            .catch((error) => {\n                console.error(error)\n            })\n\n    }\n}\n\nasync function getAds2(nodeId) {\n    return await axios\n        .get(\"http://10.250.238.177:8096/api/v1/node/selectadjacent/\" + nodeId)\n        .then(response => {\n            return response.data\n        })\n        .catch((error) => {\n            console.error(error)\n        })\n}\n\nasync function getRow(type, id) {\n    return await axios\n        .get('http://10.250.238.177:8096/api/v1/' + type + '/select?id=' + id)\n        .then(response => {\n            console.log([...response.data].shift())\n            return [...response.data].shift();\n        })\n        .catch((error) => {\n            console.error(error)\n        })\n}\n\nfunction getTemp(type) {\n    return (dispatch) => {\n        axios\n            .get('http://10.250.238.177:8096/api/v1/template/selectbytype?node=' + type)\n            .then(response => {\n                dispatch(getTmp(response.data))\n            })\n            .catch(error => {\n                throw(error);\n            })\n\n    }\n}\n\nasync function getTypes(type) {\n    return await axios\n        .get(\"http://10.250.238.177:8096/api/v1/template/entitytypes?node=\" + type)\n        .catch((error) => {\n            console.error(error)\n        })\n}\n\nasync function getVendors(enType) {\n    return await axios\n        .get(\"http://10.250.238.177:8096/api/v1/template/vendors?entity=\" + enType)\n        .catch((error) => {\n            console.error(error)\n        })\n}\n\nasync function getModels(enType, venType) {\n    return await axios\n        .get(\"http://10.250.238.177:8096/api/v1/template/models?entity=\" + enType + \"&vendor=\" + venType)\n        .catch((error) => {\n            console.error(error)\n        })\n}\n\n// 추가 가능한 entity list 조회\nasync function getEna(enType) {\n    return await axios\n        .get(\"http://10.250.238.177:8096/api/v1/asset/selectbyquery?entityType=\" + enType)\n        .catch((error) => {\n            console.error(error)\n        })\n}\n\nasync function getEnd(enType, venType, moType) {\n    return await axios\n        .get(\"http://10.250.238.177:8096/api/v1/device/selectbyquery?entityType=\" + enType + \"&vendor=\" + venType + \"&model=\" + moType)\n        .catch((error) => {\n            console.error(error)\n        })\n}\n\nasync function insertLink(ob) {\n\n    return await axios\n        .post('http://10.250.238.177:8096/api/v1/link/insert', ob)\n        .then(response => {\n            console.log(response)\n        })\n        .catch((error) => {\n            console.error(error)\n        })\n\n}\n\nasync function insertLiveDetect(ob, version) {\n    const con = []\n    const res = (({id, active, ruleType, keyField, confirms, ver, ...other}) => {\n        Object.keys(other)\n            .filter(it => other[it] !== \"\")\n            .forEach(it => {\n                con.push({field: it, value: other[it]})\n            })\n        return ({active, ruleType, keyField, confirms, ver: version})\n    })(ob)\n    res['conditions'] = con\n    return await axios\n        .post('http://10.250.238.177:8096/api/v1/rules/insert', res)\n        .then(() => console.log(\"hi\"))\n        .catch((error) => {\n            console.error(error)\n        })\n\n}\n\nasync function insert(type, ob) {\n    // const sob = (({id, createdAt, updatedAt, ... other}) => other)(ob)\n    const sob = (({id, updatedAt, ...other}) => other)(ob) //여기서 id를 빼는데.\n    // console.log(typeof sob.value)\n    console.log(sob)\n    return await axios\n        .post('http://10.250.238.177:8096/api/v1/' + type + '/insert', sob)\n        .catch((error) => {\n            console.error(error)\n        })\n\n};\n\n\nasync function insertNormal(ob) {\n    // ob[\"rules\"] = []\n    const sob = (({vendors, ...other}) => {\n        return Object.assign({}, {vendors: vendors.split(',')}, other) //TODO::restore 할때 vendor 콤마가 사라짐\n    })(ob)\n    console.log(sob)\n    return await axios\n        .post('http://10.250.238.177:8096/api/v1/normalizerule/upsertall', sob)\n        .catch((error) => {\n            console.error(error)\n        })\n}\n\nasync function insertNormalTotal(ob) {\n    const sob = (({vendors, ...other}) => {\n        return Object.assign({}, {vendors: vendors.split(',')}, other)\n    })(ob)\n    console.log(sob)\n    return await axios\n        .post('http://10.250.238.177:8096/api/v1/normalizerule/upsert', sob)\n        .catch((error) => {\n            console.error(error)\n        })\n}\n\nasync function setHistory() {\n    return await axios\n        .get(\"http://10.250.238.177:8096/api/v1/normalizerule/selectall/tohistory\")\n        .then((response) => console.log(response.data))\n        .catch((error) => {\n            console.error(error)\n        })\n}\n\nasync function getNextVal() {\n    return await axios\n        .get(\"http://10.250.238.177:8096/api/v1/normalizerule/nextid\")\n        .catch((error) => {\n            console.error(error)\n        })\n}\n\nasync function update(type, ob) {\n    console.log(ob)\n    const sob = (({createdAt, updatedAt, ...other}) => other)(ob)\n\n    return await axios\n        .post('http://10.250.238.177:8096/api/v1/' + type + '/update', sob)\n        .catch((error) => {\n            console.error(error)\n        })\n}\n\nasync function del(type, ids) {\n    console.log(ids)\n    return await axios\n        .delete('http://10.250.238.177:8096/api/v1/' + type + '/delete', {\n            headers: {'Content-Type': 'application/json'},\n            data: ids\n        })\n        .catch((error) => {\n            console.error(error)\n        })\n}\n\nasync function delNormal(type, id) {\n    return await axios\n        .delete('http://10.250.238.177:8096/api/v1/' + type + '/delete', {\n            headers: {'Content-Type': 'application/json'},\n            data: id\n        })\n        .catch((error) => {\n            console.error(error)\n        })\n}\n\nasync function delAll(type) {\n    return await axios\n        .get('http://10.250.238.177:8096/api/v1/' + type + '/deleteAll')\n        .catch((error) => {\n            console.error(error)\n        })\n}\n\nexport const apiProvider = {\n    insert,\n    update,\n    del,\n    delNormal,\n    delAll,\n    getAllRedux,\n    getNormalizeRule,\n    getNormalizeRuleFilter,\n    getHead,\n    getReleaseForm,\n    releaseZk,\n    parse,\n    signalZk,\n    getAll,\n    getRow,\n    getTemp,\n    getTypes,\n    getVendors,\n    getModels,\n    getNodes,\n    getEna,\n    getEnd,\n    getNextVal,\n    setHistory,\n    insertLink,\n    getAds,\n    getAds2,\n    getLiveRules,\n    getLiveRulesFilter,\n    insertLiveDetect,\n    insertNormal,\n    insertNormalTotal,\n    insertHead,\n    activeHead,\n    getHeadVer,\n    getRowCounts,\n    getFiltersCounts,\n    deActiveHead\n\n};"]},"metadata":{},"sourceType":"module"}